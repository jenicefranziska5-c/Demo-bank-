<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>wisetransfer — Online Banking</title>
<style>
  :root{
    --bg:#f7fbff; --card:#ffffff; --accent:#0b74de; --muted:#6b7280;
    --success:#0b8a5f; --danger:#b91c1c;
  }
  *{box-sizing:border-box;font-family:Inter,system-ui,Arial}
  body{margin:0;background:#f8fbff;color:#0f172a}
  .wrap{max-width:1100px;margin:auto;padding:20px}
  .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 2px 10px rgba(0,0,0,0.05)}
  .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:8px;border:0;cursor:pointer;font-weight:600}
  .btn-ghost{background:transparent;border:1px solid #ddd;color:var(--accent);padding:10px 12px;border-radius:8px;cursor:pointer}
  .grid{display:grid;grid-template-columns:1fr 320px;gap:16px}
  label{display:block;margin-top:10px;font-size:13px}
  input,select{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px}
  table{width:100%;border-collapse:collapse;margin-top:10px}
  th,td{padding:8px;border-bottom:1px solid #eee;font-size:13px;text-align:left}
  .balance{font-size:24px;font-weight:bold}
  .tiny{font-size:12px;color:var(--muted)}
  .success{background:#e6ffef;border:1px solid #c8f7d0;padding:10px;border-radius:8px;color:var(--success)}
  .notice{background:#fff4e6;border:1px solid #fde4bf;padding:10px;border-radius:8px;color:#92400e;margin:10px 0}
</style>
</head>
<body>
<div class="wrap">

  <!-- LOGIN -->
  <div id="loginPage" class="card">
    <h2>Login</h2>
    <label>Username</label>
    <input id="in_user" />
    <label>Password</label>
    <input id="in_pass" type="password" />
    <button id="loginBtn" class="btn" style="margin-top:12px">Login</button>
  </div>

  <!-- DASHBOARD -->
  <div id="dashboard" style="display:none">
    <div class="card" style="margin-bottom:12px">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div id="greeting"></div>
          <div id="timeNow" class="tiny"></div>
        </div>
        <div style="text-align:right">
          <div class="tiny">Balance</div>
          <div id="balance" class="balance">€0.00</div>
          <div style="margin-top:8px">
            <button id="openTransfer" class="btn">Transfer</button>
            <button id="openWithdraw" class="btn-ghost">Withdraw</button>
            <button id="logoutBtn" class="btn-ghost">Logout</button>
          </div>
        </div>
      </div>
    </div>

    <div class="grid">
      <main>
        <div class="card">
          <h3>New Transaction</h3>
          <div class="notice">A charge of €1,100 applies to every transaction</div>

          <label>Operation</label>
          <select id="op_mode"><option value="transfer">Transfer</option><option value="withdraw">Withdraw</option></select>

          <label>Method</label>
          <select id="op_method"><option value="paypal">PayPal</option><option value="revolut">Revolut</option></select>

          <label>PayPal/Revolut details</label>
          <input id="op_details" />

          <label>Amount (€)</label>
          <input id="op_amount" type="number" />

          <button id="submitTx" class="btn" style="margin-top:12px">Submit</button>
          <div id="txMsg" class="tiny" style="color:var(--danger);margin-top:6px"></div>
        </div>

        <div class="card">
          <h3>Transactions</h3>
          <table>
            <thead><tr><th>Date</th><th>Type</th><th>Method</th><th>To</th><th>Amount</th></tr></thead>
            <tbody id="txHistory"></tbody>
          </table>
          <div id="noHistory" class="tiny">No transactions yet.</div>
        </div>
      </main>

      <aside>
        <div class="card">
          <h4>Beneficiaries</h4>
          <label>Method</label>
          <select id="bene_method"><option value="paypal">PayPal</option><option value="revolut">Revolut</option></select>
          <label>Details</label>
          <input id="bene_details" />
          <button id="saveBene" class="btn" style="margin-top:8px">Save</button>
          <ul id="beneList" class="tiny" style="margin-top:10px"></ul>
        </div>
      </aside>
    </div>
  </div>

  <!-- CONFIRM -->
  <div id="confirmPage" style="display:none" class="card">
    <h3>Confirm Transaction</h3>
    <p id="confirmSummary"></p>
    <button id="confirmBtn" class="btn">Confirm</button>
    <button id="cancelBtn" class="btn-ghost">Cancel</button>
  </div>

  <!-- SUCCESS -->
  <div id="successPage" style="display:none" class="card">
    <h3>Transaction Complete</h3>
    <div id="successMsg" class="success"></div>
    <button id="backBtn" class="btn" style="margin-top:12px">Back to Dashboard</button>
  </div>
</div>

<script>
const FEE=1100, START_BAL=40000;
const LS_BAL='bal', LS_TXS='txs', LS_BENE='benes';
if(!localStorage.getItem(LS_BAL))localStorage.setItem(LS_BAL,START_BAL);
if(!localStorage.getItem(LS_TXS))localStorage.setItem(LS_TXS,'[]');
if(!localStorage.getItem(LS_BENE))localStorage.setItem(LS_BENE,'[]');

const loginPage=document.getElementById('loginPage');
const dash=document.getElementById('dashboard');
const confirmPage=document.getElementById('confirmPage');
const successPage=document.getElementById('successPage');

document.getElementById('loginBtn').onclick=()=>{
  loginPage.style.display='none';dash.style.display='block';render();
};
document.getElementById('logoutBtn').onclick=()=>{
  dash.style.display='none';loginPage.style.display='block';
};

function render(){
  document.getElementById('balance').textContent='€'+(+localStorage.getItem(LS_BAL)).toLocaleString();
  document.getElementById('greeting').textContent="Hello, Client";
  document.getElementById('timeNow').textContent=new Date().toLocaleString();
  renderHistory();renderBeneficiaries();
}

function renderHistory(){
  const txs=JSON.parse(localStorage.getItem(LS_TXS));
  const body=document.getElementById('txHistory');
  body.innerHTML='';
  if(txs.length===0){document.getElementById('noHistory').style.display='block';return;}
  document.getElementById('noHistory').style.display='none';
  txs.forEach(t=>{
    body.innerHTML+=`<tr><td>${t.date}</td><td>${t.type}</td><td>${t.method}</td><td>${t.to}</td><td>-€${t.amount}</td></tr>`;
  });
}

function renderBeneficiaries(){
  const benes=JSON.parse(localStorage.getItem(LS_BENE));
  const ul=document.getElementById('beneList');
  ul.innerHTML='';
  benes.forEach((b,i)=>{
    ul.innerHTML+=`<li>${b.method}: ${b.details} <button onclick="useBene(${i})">Use</button></li>`;
  });
}
window.useBene=i=>{
  const b=JSON.parse(localStorage.getItem(LS_BENE))[i];
  document.getElementById('op_method').value=b.method;
  document.getElementById('op_details').value=b.details;
};

document.getElementById('saveBene').onclick=()=>{
  const method=document.getElementById('bene_method').value;
  const details=document.getElementById('bene_details').value;
  if(!details)return;
  const benes=JSON.parse(localStorage.getItem(LS_BENE));
  benes.push({method,details});
  localStorage.setItem(LS_BENE,JSON.stringify(benes));
  document.getElementById('bene_details').value='';
  renderBeneficiaries();
};

document.getElementById('submitTx').onclick=()=>{
  const mode=document.getElementById('op_mode').value;
  const method=document.getElementById('op_method').value;
  const details=document.getElementById('op_details').value;
  const amt=+document.getElementById('op_amount').value;
  if(!details||!amt){document.getElementById('txMsg').textContent='Enter details & amount';return;}
  const total=amt+FEE;
  const bal=+localStorage.getItem(LS_BAL);
  if(total>bal){document.getElementById('txMsg').textContent='Insufficient balance';return;}
  confirmPage.style.display='block';dash.style.display='none';
  document.getElementById('confirmSummary').textContent=`${mode} €${amt} via ${method} to ${details}\nFee: €${FEE}\nTotal: €${total}`;
  confirmPage.dataset.pending=JSON.stringify({mode,method,to:details,amount:amt,total});
};

document.getElementById('confirmBtn').onclick=()=>{
  const tx=JSON.parse(confirmPage.dataset.pending);
  let bal=+localStorage.getItem(LS_BAL);
  bal-=tx.total;localStorage.setItem(LS_BAL,bal);
  const txs=JSON.parse(localStorage.getItem(LS_TXS));
  txs.push({date:new Date().toLocaleString(),...tx});
  localStorage.setItem(LS_TXS,JSON.stringify(txs));
  confirmPage.style.display='none';successPage.style.display='block';
  document.getElementById('successMsg').textContent=`${tx.mode} of €${tx.amount} to ${tx.to} completed. Fee €${FEE} applied.`;
};
document.getElementById('cancelBtn').onclick=()=>{confirmPage.style.display='none';dash.style.display='block';};
document.getElementById('backBtn').onclick=()=>{successPage.style.display='none';dash.style.display='block';render();};
</script>
</body>
</html>
